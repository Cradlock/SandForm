# Платформа

Этот проект `игровая песочница` 


## Структура

*Код*
```
.
├── app.cpp  
├── CMakeLists.txt  
├── core 
│   ├── CMakeLists.txt
│   ├── include
│   └── src
├── input  
│   ├── CMakeLists.txt
│   ├── include
│   └── src
├── modding  
│   ├── CMakeLists.txt
│   ├── include
│   └── src
├── render  
│   ├── CMakeLists.txt
│   ├── include
│   └── src
├── resource_manager  
│   ├── CMakeLists.txt
│   ├── include
│   └── src
└── sound 
    ├── CMakeLists.txt
    ├── include
    └── src


```

## Детали структуры

### `core`
Нужен для системы логирования,общих базовых типов данных,
управления тиками игры.


### `input` 
Модуль для обработки действий от игрока.(Нажатия клавиш,работа с мышью,геймпад)


### `modding`
Основной клиентский API,нужен чтобы пользователи могли писать свою логику для их игры.

### `render` 
Графический движок.Отрисовка всех элементов игры

### `resource_manager`
Управление ресурсами (внешними файлами).
Все файлы которые будут использоватся (png,gif,mp3,json) будут получатся кешироватся
через этот модуль

### `sound` 
Работа со звуком.

### `app.cpp`
Точка входа которая все запускает.



## Цикл работы
```
Запуск точки входа app.cpp 
    |
    |
    |
    |
Запуск дефолтного окна 
    |
    |
    |
Проверка окружающих ресурсов ( dynamic_modules, settings, assets/, mods/ )
    |  \
    |   \
    |    \
    |   Ошибка
    |       \-> Указать на ошибку(посоветовать решение)
    |
    |
Запустить чтение ресурсов: Настройки,ресурсы,моды,плагины
    |
    |
    |
Запуск стандартного меню со всеми плагинами
```
---
> Плагины могут поменять главное меню,окно загрузки,кнопки,текстуры,шейдеры
> можно использовать несколько плагинов если они не мешают,если мешают надо выбрать определенный
---
```                
      Game Name
    ----------------
        [Start]
        [Saves]
        [Games]
       [Settings]
        [Quit]
```
---
```
[Start] -> Запуск последней сохраненой игры с последней модификацией

[Saves] -> Просмотреть все сохраненые игры 

[Games] -> Просмотр всех модов 

[Settings] -> Настройки

[Quit] -> Выйти из игры
```
---
```
Запуск игры ----> активировать какой либо мод
                    /
                   /
                  /
        Подготовка ресурсов и проверка на ошибки
                |
                |
                |
            Активация

```


## Зависимости
- `GLFW`:Модуль для создания графического окна (Windows,Linux,MacOS),также 
позволяет ловить ввод с клавиатуры.






## Логическая структура игры
В начале игры существует понятие таблиц (динамических хранилищ данных) у каждого
из них есть своя зона:

---
1 ring: Состояние игры (устанавливается изначально)
---
2 ring: Ресурсы (все ресурсы загруженные для игры)
---
3 ring: Логические части игры (сущности,зоны) создаются при активации мода
---


`Логические части игры` - то от чего зависит вся игра,это то с чем связан моддинг
на `lua` напрямую.















